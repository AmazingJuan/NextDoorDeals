<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<br>
<h1 style="text-align: center; background-color: lightblue; padding: 10px; border-radius: 10px;" >Welcome to NextDoorDeals.</h1>
<br>
<img src="/media/property/images/NextDoorDealsLogo.png" alt="NextDoorDealsLogo" style= "width: 500px; align-self: center;">


<div class = "container">
    <form action="">
        <div class = "mb-3">
            <label for="searchProperty" class = "form-label"> 
                <strong>
                    Search for Property:
                </strong> 
            </label>
            <input type="text" class="form-control" name = "searchProperty" value = "{{ request.GET.searchProperty }}" style="width: 400px;"/>
        </div>
        <details>
            <summary>Filters</summary>
                <div class="row">
                    <div class="col-md-6">
                        <label for="minPrice" class="form-label"><strong>Minimum Price:</strong></label>
                        <input type="number" class="form-control" name="minPrice" value="{{ request.GET.minPrice }}" style="width: 150px;"/>
                    </div>
                    <div class="col-md-6">
                        <label for="maxPrice" class="form-label"><strong>Maximum Price:</strong></label>
                        <input type="number" class="form-control" name="maxPrice" value="{{ request.GET.maxPrice }}" style="width: 150px;"/>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <br>
                        <label for="minSES" class="form-label"><strong>Minimum Socio Economic Status:</strong></label>
                        <br>
                        <select id="minSES" name="minSES">
                            <option value=""></option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <br>
                        <label for="maxSES" class="form-label"><strong>Maximum Socio Economic Status:</strong></label>
                        <br>
                        <select id="maxSES" name="maxSES">
                            <option value=""></option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>
                </div>

                <div class = "row">
                    <label for = "district" class = "form-label">District</label>
                    <select id = "district" name = "district" class = "col-md-6">
                        <option value=""></option>
                    {% for district in districts %}
                        <option value="{{district.id}}" {% if district.id|stringformat:"s" == request.GET.district %} selected {% endif %}>{{district.name}}</option>
                    {% endfor %}
                    </select>
                </div>
          </details>
        <br>
        <button type="submit" class = "btn btn-primary">Search</button>      
    </form>
    {% if searchTerm is not None %}
    <p>Searching for: {{ searchTerm }}</p>
    {% endif %}
    <div class = "row row-cols-1 row-cols-md-3 g-4">
        {% if propertyPresence %}
            {% for property in propertys %}
                <div v-for = "property in propertys" class = "col">
                    <div class = "card">
                        <img class = "card-im-top" src="{{ property.image.url }}" />
                        <div class = "card-body">
                            <h5 class = "card-title fw-bold"> {{ property.name }}</h5>
                            <h6><strong>Description:</strong></h6>
                            <p class = "card-text">{{ property.description }}</p>
                            <h6><strong>Property type:</strong></h6>
                            <p class = "card-text"> {{ property.propertyType }} </p>
                            <h6><strong>Price:</strong></h6>
                            <p class = "card-text"> {{ property.price }}</p>
                            <h6><strong>Socio Economic Status:</strong></h6>
                            <p class = "card-text"> {{property.socioEconomicStatus}}</p>
                            <h6><strong>District: </strong>{{ property.addressID.neigID.dID.name }}</h6>
                            <p class = "card-text">{{ property.district }}</p>                     
                            {% if property.location %}
                            <a href="{{ property.location }}" class = "btn btn-primary" target = "_blank">
                                Property Location 
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p>Sorry it ain't no properties that match with your query</p>
        {% endif %}
    </div>
    <br/>
    <br/>
</div>