{% extends 'base.html' %}

{% block title %}
<title>NextDoorDeals | Edit Property</title>
<link rel="icon" type="image/png" href="/media/property/images/favicon.ico">
{% endblock %}

{% block content %}
  <div class="container mt-4">
    <h2>Edit Property</h2>

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      
      <div class="row mb-4">
        <div class="col-md-6">
          <label for="id_title" class="form-label">Property Title:</label>
          {{ form.title }}
          {% if form.title.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.title.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <div class="col-md-6">
          <label for="id_price" class="form-label">Price:</label>
          {{ form.price }}
          {% if form.price.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.price.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <label for="id_description" class="form-label">Description:</label>
          {{ form.description }}
          {% if form.description.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.description.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <div class="col-md-6">
          <label for="id_propertyType" class="form-label">Property Type:</label>
          {{ form.propertyType }}
          {% if form.propertyType.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.propertyType.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-6">
          <label for="id_SES" class="form-label">SES:</label>
          {{ form.SES }}
          {% if form.SES.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.SES.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>

        <div class="col-md-6">
          <label for="id_location" class="form-label">District:</label>
          {{ form.location }}
          {% if form.location.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.location.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-12">
            <br>
          <label for="id_image" class="form-label">Update Property Images:</label>
          {{ form.image }}
          {% if form.image.errors %}
            <div class="alert alert-danger mt-2">
              {% for error in form.image.errors %}
                <p>{{ error }}</p>
              {% endfor %}
            </div>
          {% endif %}
        </div>
      </div>

      <div class="row mb-4">
        <div class="col-md-12 text-center">
          <button type="submit" class="btn text-white btn-lg" style="background-color: #11324f; border-color: #11324f;">
            Save Changes
          </button>
          
        </div>
      </div>
    </form>

    <h3 class="mt-4">Current Property Images:</h3>
    <div class="row">
      {% for image in property.imagenes.all %}
        <div class="col-md-3 mb-3">
          <img src="{{ image.image.url }}" alt="Property Image" class="img-fluid rounded">
        </div>
      {% endfor %}
    </div>
  </div>
{% endblock %}
